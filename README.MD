
# Labs Auction Go

Este projeto √© um sistema de leil√£o desenvolvido em Go, utilizando MongoDB como persist√™ncia e Docker para orquestra√ß√£o. Agora, com suporte a **fechamento autom√°tico de leil√µes** via goroutine!

---

## Funcionalidade nova

- Leil√µes criados s√£o **fechados automaticamente** ap√≥s um tempo definido (padr√£o: 60 segundos).
- O tempo pode ser configurado via `.env`.

---

## Requisitos

- Docker e Docker Compose instalados  
- Go (opcional, para rodar testes fora do container)

---

## Como rodar o projeto

### 1. Clone o reposit√≥rio

```bash
git clone https://github.com/fmantinossi/labs-auction-go.git
cd labs-auction-go
```

### 2. Suba os containers

```bash
docker-compose up --build
```

---

## Como executar os testes

### Dentro do container (recomendado)

```bash
docker exec -it <nome_do_container_app> go test ./internal/infra/database/auction -v
```

### Localmente (se tiver Go instalado)

```bash
go test ./internal/infra/database/auction -v
```

> O teste `TestAuctionAutoClose` cria um leil√£o e valida se ele √© fechado ap√≥s 5 segundos automaticamente.

---

## Estrutura relevante

- `internal/infra/database/auction/create_auction.go`: l√≥gica de cria√ß√£o + goroutine de expira√ß√£o  
- `internal/infra/database/auction/create_auction_test.go`: teste automatizado de expira√ß√£o  
- `.env.example`: vari√°veis de configura√ß√£o

---

## üõ† Vari√°veis de ambiente

```env
AUCTION_DURATION_SECONDS=60
AUCTION_CHECK_INTERVAL_SECONDS=10
```

---
